{"version":3,"file":"reply.min.js","sources":["../src/reply.js"],"sourcesContent":["define(['jquery', 'core/ajax', 'core/modal_factory', 'core/custom_interaction_events', 'mod_knowledgeshare/reply_modal'], function($, Ajax, ModalFactory, CustomEvents, ReplyModal){\n\n    let trigger = $(\".reply-btn\");\n\n    let postid = trigger.data('postid');\n    let modid = trigger.data('modid');\n\n\n    ModalFactory.create({\n        type: ReplyModal.TYPE,\n        title: \"Add a comment\",\n        large: true\n    } , trigger)\n        .done(function(modal) {\n            \n            modal.getRoot().on(CustomEvents.events.activate, '[data-action=\"reply\"]', function(e){\n\n                let comment = modal.modal.find('#inputReply');\n                let commentContent = comment[0].value;\n                console.log(comment[0].value);\n\n\n                if(commentContent == ''){\n                    $(comment).addClass(\"is-invalid\");\n                } else {\n\n                    let request = {\n                        methodname: 'mod_knowledgeshare_add_reply',\n                        args: {\n                            modid: modid,\n                            postid: postid,\n                            content: commentContent\n                        }\n                    };\n\n                    Ajax.call([request])[0].done(function(result){\n                        window.location.reload();\n                    }).fail(function(error){\n                        console.log(error);\n                    });\n                }              \n                //window.location.reload();\n            });\n\n            modal.getRoot().on(CustomEvents.events.activate, '[data-action=\"cancel\"]', function(e){\n                console.log(\"Cancel Clicked\");\n                modal.hide();\n            });\n        });\n});"],"names":["define","$","Ajax","ModalFactory","CustomEvents","ReplyModal","trigger","postid","data","modid","create","type","TYPE","title","large","done","modal","getRoot","on","events","activate","e","comment","find","commentContent","value","console","log","addClass","request","methodname","args","content","call","result","window","location","reload","fail","error","hide"],"mappings":"AAAAA,kCAAO,CAAC,SAAU,YAAa,qBAAsB,iCAAkC,mCAAmC,SAASC,EAAGC,KAAMC,aAAcC,aAAcC,gBAEhKC,QAAUL,EAAE,cAEZM,OAASD,QAAQE,KAAK,UACtBC,MAAQH,QAAQE,KAAK,SAGzBL,aAAaO,OAAO,CAChBC,KAAMN,WAAWO,KACjBC,MAAO,gBACPC,OAAO,GACPR,SACCS,MAAK,SAASC,OAEXA,MAAMC,UAAUC,GAAGd,aAAae,OAAOC,SAAU,yBAAyB,SAASC,OAE3EC,QAAUN,MAAMA,MAAMO,KAAK,eAC3BC,eAAiBF,QAAQ,GAAGG,SAChCC,QAAQC,IAAIL,QAAQ,GAAGG,OAGF,IAAlBD,eACCvB,EAAEqB,SAASM,SAAS,kBACjB,KAECC,QAAU,CACVC,WAAY,+BACZC,KAAM,CACFtB,MAAOA,MACPF,OAAQA,OACRyB,QAASR,iBAIjBtB,KAAK+B,KAAK,CAACJ,UAAU,GAAGd,MAAK,SAASmB,QAClCC,OAAOC,SAASC,YACjBC,MAAK,SAASC,OACbb,QAAQC,IAAIY,cAMxBvB,MAAMC,UAAUC,GAAGd,aAAae,OAAOC,SAAU,0BAA0B,SAASC,GAChFK,QAAQC,IAAI,kBACZX,MAAMwB"}