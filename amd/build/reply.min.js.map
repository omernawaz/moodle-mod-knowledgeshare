{"version":3,"file":"reply.min.js","sources":["../src/reply.js"],"sourcesContent":["define(['jquery', 'core/ajax', 'core/modal_factory', 'core/custom_interaction_events', 'mod_knowledgeshare/reply_modal'],\n    function($, Ajax, ModalFactory, CustomEvents, ReplyModal) {\n\n    let trigger = $(\".reply-btn\");\n\n    var clickedInstanceBtn = null;\n    $(\".reply-btn\").click(function() {\n        clickedInstanceBtn = $(this);\n    });\n\n\n    ModalFactory.create({\n        type: ReplyModal.TYPE,\n        title: \"Add a comment\",\n        large: true\n    }, trigger)\n        .done(function(modal) {\n            modal.getRoot().on(CustomEvents.events.activate, '[data-action=\"reply\"]', function() {\n                let comment = modal.modal.find('#inputReply');\n                let commentContent = comment[0].value;\n                console.log(comment[0].value);\n\n                let modid = clickedInstanceBtn.data('modid');\n                let postid = clickedInstanceBtn.data('postid');\n\n                if (commentContent == '') {\n                    $(comment).addClass(\"is-invalid\");\n                } else {\n\n                    let request = {\n                        methodname: 'mod_knowledgeshare_add_reply',\n                        args: {\n                            modid: modid,\n                            postid: postid,\n                            content: commentContent\n                        }\n                    };\n\n                    Ajax.call([request])[0].done(function() {\n                        window.location.reload();\n                    }).fail(function(error) {\n                        console.log(error);\n                    });\n                }\n            });\n\n            modal.getRoot().on(CustomEvents.events.activate, '[data-action=\"cancel\"]', function() {\n                console.log(\"Cancel Clicked\");\n                modal.hide();\n            });\n        });\n});"],"names":["define","$","Ajax","ModalFactory","CustomEvents","ReplyModal","trigger","clickedInstanceBtn","click","this","create","type","TYPE","title","large","done","modal","getRoot","on","events","activate","comment","find","commentContent","value","console","log","modid","data","postid","addClass","request","methodname","args","content","call","window","location","reload","fail","error","hide"],"mappings":"AAAAA,kCAAO,CAAC,SAAU,YAAa,qBAAsB,iCAAkC,mCACnF,SAASC,EAAGC,KAAMC,aAAcC,aAAcC,gBAE1CC,QAAUL,EAAE,kBAEZM,mBAAqB,KACzBN,EAAE,cAAcO,OAAM,WAClBD,mBAAqBN,EAAEQ,SAI3BN,aAAaO,OAAO,CAChBC,KAAMN,WAAWO,KACjBC,MAAO,gBACPC,OAAO,GACRR,SACES,MAAK,SAASC,OACXA,MAAMC,UAAUC,GAAGd,aAAae,OAAOC,SAAU,yBAAyB,eAClEC,QAAUL,MAAMA,MAAMM,KAAK,eAC3BC,eAAiBF,QAAQ,GAAGG,MAChCC,QAAQC,IAAIL,QAAQ,GAAGG,WAEnBG,MAAQpB,mBAAmBqB,KAAK,SAChCC,OAAStB,mBAAmBqB,KAAK,aAEf,IAAlBL,eACAtB,EAAEoB,SAASS,SAAS,kBACjB,KAECC,QAAU,CACVC,WAAY,+BACZC,KAAM,CACFN,MAAOA,MACPE,OAAQA,OACRK,QAASX,iBAIjBrB,KAAKiC,KAAK,CAACJ,UAAU,GAAGhB,MAAK,WACzBqB,OAAOC,SAASC,YACjBC,MAAK,SAASC,OACbf,QAAQC,IAAIc,cAKxBxB,MAAMC,UAAUC,GAAGd,aAAae,OAAOC,SAAU,0BAA0B,WACvEK,QAAQC,IAAI,kBACZV,MAAMyB"}