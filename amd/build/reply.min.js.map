{"version":3,"file":"reply.min.js","sources":["../src/reply.js"],"sourcesContent":["define(['jquery', 'core/ajax', 'core/modal_factory', 'core/custom_interaction_events', 'mod_knowledgeshare/reply_modal'], function($, Ajax, ModalFactory, CustomEvents, ReplyModal){\n\n    let trigger = $(\".reply-btn\");\n\n    var clickedInstanceBtn = null;\n    $(\".reply-btn\").click(function (e) { \n        clickedInstanceBtn = $(this);\n    });\n\n\n    ModalFactory.create({\n        type: ReplyModal.TYPE,\n        title: \"Add a comment\",\n        large: true\n    } , trigger)\n        .done(function(modal) {\n            \n            modal.getRoot().on(CustomEvents.events.activate, '[data-action=\"reply\"]', function(e){\n\n                let comment = modal.modal.find('#inputReply');\n                let commentContent = comment[0].value;\n                console.log(comment[0].value);\n\n                let modid = clickedInstanceBtn.data('modid');\n                let postid = clickedInstanceBtn.data('postid');\n\n                if(commentContent == ''){\n                    $(comment).addClass(\"is-invalid\");\n                } else {\n\n                    let request = {\n                        methodname: 'mod_knowledgeshare_add_reply',\n                        args: {\n                            modid: modid,\n                            postid: postid,\n                            content: commentContent\n                        }\n                    };\n\n                    Ajax.call([request])[0].done(function(result){\n                        window.location.reload();\n                    }).fail(function(error){\n                        console.log(error);\n                    });\n                }              \n                //window.location.reload();\n            });\n\n            modal.getRoot().on(CustomEvents.events.activate, '[data-action=\"cancel\"]', function(e){\n                console.log(\"Cancel Clicked\");\n                modal.hide();\n            });\n        });\n});"],"names":["define","$","Ajax","ModalFactory","CustomEvents","ReplyModal","trigger","clickedInstanceBtn","click","e","this","create","type","TYPE","title","large","done","modal","getRoot","on","events","activate","comment","find","commentContent","value","console","log","modid","data","postid","addClass","request","methodname","args","content","call","result","window","location","reload","fail","error","hide"],"mappings":"AAAAA,kCAAO,CAAC,SAAU,YAAa,qBAAsB,iCAAkC,mCAAmC,SAASC,EAAGC,KAAMC,aAAcC,aAAcC,gBAEhKC,QAAUL,EAAE,kBAEZM,mBAAqB,KACzBN,EAAE,cAAcO,OAAM,SAAUC,GAC5BF,mBAAqBN,EAAES,SAI3BP,aAAaQ,OAAO,CAChBC,KAAMP,WAAWQ,KACjBC,MAAO,gBACPC,OAAO,GACPT,SACCU,MAAK,SAASC,OAEXA,MAAMC,UAAUC,GAAGf,aAAagB,OAAOC,SAAU,yBAAyB,SAASZ,OAE3Ea,QAAUL,MAAMA,MAAMM,KAAK,eAC3BC,eAAiBF,QAAQ,GAAGG,MAChCC,QAAQC,IAAIL,QAAQ,GAAGG,WAEnBG,MAAQrB,mBAAmBsB,KAAK,SAChCC,OAASvB,mBAAmBsB,KAAK,aAEhB,IAAlBL,eACCvB,EAAEqB,SAASS,SAAS,kBACjB,KAECC,QAAU,CACVC,WAAY,+BACZC,KAAM,CACFN,MAAOA,MACPE,OAAQA,OACRK,QAASX,iBAIjBtB,KAAKkC,KAAK,CAACJ,UAAU,GAAGhB,MAAK,SAASqB,QAClCC,OAAOC,SAASC,YACjBC,MAAK,SAASC,OACbhB,QAAQC,IAAIe,cAMxBzB,MAAMC,UAAUC,GAAGf,aAAagB,OAAOC,SAAU,0BAA0B,SAASZ,GAChFiB,QAAQC,IAAI,kBACZV,MAAM0B"}